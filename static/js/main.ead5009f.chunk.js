(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},91:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(30),i=a.n(s),r=(a(73),a(10)),o=(a(74),a(75),a(114)),j=a(109),d=a(58),l=a.n(d),u=a(59),b=a.n(u),m=a(60),h=a.n(m),O=a(110),p=(a(76),a(27)),f=p.a.initializeApp({apiKey:"AIzaSyCYmU-SnsQxAGOpnFFhcR5khqHbo3XH_FI",authDomain:"whatsappclone-ba70f.firebaseapp.com",projectId:"whatsappclone-ba70f",storageBucket:"whatsappclone-ba70f.appspot.com",messagingSenderId:"504204411802",appId:"1:504204411802:web:7e96ba30cd343b3d0d7023",measurementId:"G-HHC2HRPXGP"}),x=f.firestore(),v=f.auth(),g=new p.a.auth.GoogleAuthProvider,N=p.a.storage(),S=(p.a.firestore.FieldValue.serverTimestamp,x),y=a(36),w=a(4);var C=function(e){var t,a=e.addChat,n=e.name,s=e.id,i=Object(c.useState)(" "),j=Object(r.a)(i,2),d=j[0],l=j[1],u=Object(c.useState)(""),b=Object(r.a)(u,2),m=b[0],h=b[1];return Object(c.useEffect)((function(){s&&S.collection("rooms").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){l(e.docs.map((function(e){return e.data()})))}))}),[s]),Object(c.useEffect)((function(){h(Math.floor(5e3*Math.random()))}),[]),a?Object(w.jsx)("div",{onClick:function(){var e=prompt("add new chat");e&&S.collection("rooms").add({name:e})},className:"sidebar-chat",children:Object(w.jsx)("h2",{children:" Add New Chat"})}):Object(w.jsx)(y.b,{to:"/rooms/".concat(s),children:Object(w.jsxs)("div",{className:"sidebar-chat",children:[Object(w.jsx)(o.a,{src:"https://avatars.dicebear.com/api/initials/".concat(m,".svg")}),Object(w.jsxs)("div",{className:"sidebar-chat-info",children:[Object(w.jsxs)("h2",{children:["  ",n]}),Object(w.jsx)("p",{children:null===(t=d[0])||void 0===t?void 0:t.message})]})]})})},k=Object(c.createContext)(),I=function(e){var t=e.reducer,a=e.initialState,n=e.children;return Object(w.jsx)(k.Provider,{value:Object(c.useReducer)(t,a),children:n})},F=function(){return Object(c.useContext)(k)},T=function(){var e=F(),t=Object(r.a)(e,2),a=t[0].user,n=(t[1],Object(c.useState)([])),s=Object(r.a)(n,2),i=s[0],d=s[1];return Object(c.useEffect)((function(){var e=S.collection("rooms").onSnapshot((function(e){return d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(w.jsxs)("div",{className:"sidebar",children:[Object(w.jsxs)("div",{className:"sidebar-header",children:[Object(w.jsx)(o.a,{src:a.photoURL}),Object(w.jsxs)("div",{className:"sidebar-header-right",children:[Object(w.jsx)(j.a,{children:Object(w.jsx)(l.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(b.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(h.a,{})})]})]}),Object(w.jsx)("div",{className:"sidebar-search",children:Object(w.jsxs)("div",{className:"sidebar-searchContainer",children:[Object(w.jsx)(O.a,{}),Object(w.jsx)("input",{placeholder:"start a new chat",type:"text"})]})}),Object(w.jsxs)("div",{className:"sidebar-chatlist",children:[Object(w.jsx)(C,{addChat:!0}),i.map((function(e){return Object(w.jsx)(C,{id:e.id,name:e.data.name},e.id)}))]})]})},E=a(25),R=a(41),A=a.n(R),D=a(49),P=(a(91),a.p+"static/media/aa.14327386.jpg"),_=a(111),B=a(112),L=a(62),M=a.n(L),G=a(61),H=a.n(G),U=a(11),V=a(50),W=a.n(V),K=a(51),z=a.n(K),J=function(){var e,t,a=Object(c.useRef)(),n=F(),s=Object(r.a)(n,2),i=s[0].user,d=(s[1],Object(c.useState)([])),l=Object(r.a)(d,2),u=l[0],b=l[1],m=Object(U.f)().roomId,h=Object(c.useState)(""),f=Object(r.a)(h,2),x=f[0],v=f[1],g=Object(c.useState)([]),y=Object(r.a)(g,2),C=y[0],k=y[1],I=Object(c.useState)(" "),T=Object(r.a)(I,2),R=T[0],L=T[1],G=Object(c.useState)(""),V=Object(r.a)(G,2),J=V[0],X=V[1],q=Object(c.useState)(""),Q=Object(r.a)(q,2),Y=(Q[0],Q[1]),Z=Object(c.useState)(0),$=Object(r.a)(Z,2),ee=($[0],$[1]),te=Object(c.useState)("true"),ae=Object(r.a)(te,2),ce=ae[0],ne=ae[1],se=Object(c.useState)(""),ie=Object(r.a)(se,2),re=ie[0],oe=ie[1];Object(c.useEffect)((function(){S.collection("rooms").doc(m).onSnapshot((function(e){v(e.data().name)})),S.collection("rooms").doc(m).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){k(e.docs.map((function(e){return e.data()})))}))}),[m]),Object(c.useEffect)((function(){J&&je.put(R).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;ee(t)}),(function(e){Y(e)}),Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.collection("rooms").doc(m).collection("messages").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),image:J,name:null===i||void 0===i?void 0:i.displayName}),X("");case 2:case"end":return e.stop()}}),e)}))))}),[J]);var je=N.ref("images/".concat(R.name)),de=function(){var e=Object(D.a)(A.a.mark((function e(t){var a,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.target.files[0])){e.next=9;break}return c=new FileReader,e.next=5,L(a);case 5:c.onloadend=function(){X(c.result)},c.readAsDataURL(a),e.next=11;break;case 9:L(null),Y("Please select an image file");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"chat",children:[Object(w.jsxs)("div",{className:"chat-header",children:[Object(w.jsx)(o.a,{src:P}),Object(w.jsxs)("div",{className:"chat-header-info",children:[Object(w.jsx)("h3",{children:x}),Object(w.jsxs)("p",{children:["Last Active ."," ",W()(null===(e=C[C.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).startOf("minute").fromNow()]})]}),Object(w.jsxs)("div",{className:"chat-header-right",children:[Object(w.jsx)(j.a,{children:Object(w.jsx)(O.a,{})}),Object(w.jsx)(j.a,{children:Object(w.jsxs)("label",{htmlFor:"image",children:[Object(w.jsx)(_.a,{style:{cursor:"pointer"}}),Object(w.jsx)("input",{type:"file",onChange:de,id:"image",style:{display:"none"}})]})}),Object(w.jsx)(j.a,{children:Object(w.jsx)(B.a,{})})]})]}),Object(w.jsx)("div",{className:"chat-body",children:C.map((function(e){var t;return Object(w.jsxs)("p",{className:"message ".concat(e.name===i.displayName&&"reciever"),children:[e.message," ",Object(w.jsx)("img",{className:"media",src:e.image}),Object(w.jsxs)("span",{className:"sender-name",children:[" ",e.name," "]}),Object(w.jsxs)("span",{className:"emoti",children:[" ",e.emoti," "]}),Object(w.jsx)("span",{className:"timestamp",children:W()(null===(t=C.timestamp)||void 0===t?void 0:t.toDate()).format("LT")})]})}))}),Object(w.jsxs)("div",{className:"chat-footer",children:[Object(w.jsx)(H.a,{style:{cursor:"pointer",width:"40px",marginRight:"-15px"},onClick:function(){ne((function(e){return!e}))}}),Object(w.jsx)("div",{className:ce?"hidden":"active",children:Object(w.jsx)(z.a,{onEmojiClick:function(e,t){b(t),console.log(a.current.defaultValue)},skinTone:K.SKIN_TONE_MEDIUM_DARK})}),u.emoji,Object(w.jsxs)("form",{onSubmit:function(e){return e.preventDefault},children:[Object(w.jsx)("input",{className:"text-input",value:re,type:"text",placeholder:"Type a message",onChange:function(e){return oe(e.target.value)}}),Object(w.jsx)("input",{ref:a,className:"emotibox",id:"emo",type:"text",onChange:function(e){return b([].concat(Object(E.a)(u),[e.target.value]))}}),Object(w.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),S.collection("rooms").doc(m).collection("messages").add({message:re,name:null===i||void 0===i?void 0:i.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp(),emoti:u.emoji}),oe(""),b("")},children:"send The Message"})]}),Object(w.jsx)(M.a,{})]})]})},X=a(63),q=(a(93),a(113)),Q=a(52),Y="SET_USER",Z=function(e,t){switch(t.type){case Y:return Object(Q.a)(Object(Q.a)({},e),{},{user:t.user});default:return e}},$=function(){var e=F(),t=Object(r.a)(e,2);Object(X.a)(t[0]);var a=t[1];return Object(w.jsx)("div",{className:"login",children:Object(w.jsxs)("div",{className:"login-container",children:[Object(w.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:""}),Object(w.jsx)("div",{className:"login_text",children:Object(w.jsx)("h1",{children:"Sign in to Whatsapp"})}),Object(w.jsx)(q.a,{type:"submit",onClick:function(){v.signInWithPopup(g).then((function(e){return a({type:Y,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in With Google"})]})})};var ee=function(){var e=F(),t=Object(r.a)(e,2),a=t[0].user;return t[1],Object(w.jsx)("div",{className:"app",children:a?Object(w.jsx)("div",{className:"app-container",children:Object(w.jsxs)(y.a,{children:[Object(w.jsx)(T,{}),Object(w.jsxs)(U.c,{children:[Object(w.jsx)(U.a,{path:"/rooms/:roomId",children:Object(w.jsx)(J,{})}),Object(w.jsx)(U.a,{path:"/",children:Object(w.jsx)("h1",{})})]})]})}):Object(w.jsx)($,{})})},te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,115)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};i.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(I,{initialState:{user:null},reducer:Z,children:Object(w.jsx)(ee,{})})}),document.getElementById("root")),te()}},[[94,1,2]]]);
//# sourceMappingURL=main.ead5009f.chunk.js.map